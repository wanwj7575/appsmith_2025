{
  "gitSyncId": "636b1198aaab6224b941b41b_636b11aaaaab6224b941b4b2",
  "id": "执行巡检任务_sRInspec_case_onpage",
  "pluginId": "mysql-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT t1.inspectioncase_id, t1.inspection_term, t1.inspection_conent, t1.business, t1.inspection_cycle, t1.inspection_mode, t2.inspec_status, t1.remarks\nFROM inspection_case t1 LEFT JOIN \n(SELECT * FROM (SELECT * FROM inspection_record ORDER BY inspection_record_id DESC LIMIT 1000) t GROUP BY t.inspectioncase_id ) t2\nON t1.inspectioncase_id= t2.inspectioncase_id\nWHERE JSON_SEARCH( ( SELECT inspection_business FROM `inspection_report` WHERE create_by = '{{appsmith.user.name}} ' ORDER BY create_time DESC LIMIT 1), 'one', t1.business ) IS NOT NULL\nand (t1.inspection_cycle =  '{{Select1.selectedOptionValue}}'  or   '{{Select1.selectedOptionValue?0:1}}')\nand (t1.inspection_mode =  '{{Select2.selectedOptionValue}}'  or   '{{Select2.selectedOptionValue?0:1}}')\nAND (t1.status = 1)\nAND (t2.create_time IS NULL OR YEARWEEK( date_format( t2.create_time, '%Y-%m-%d' ), 1 ) = YEARWEEK( now(), 1 ))\n limit {{ Table1.pageSize }} offset {{ (Table1.pageNo - 1) * Table1.pageSize }} ;",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": false
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "local_mysql",
      "isAutoGenerated": false,
      "name": "local_mysql",
      "pluginId": "mysql-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "sRInspec_case_onpage",
    "pageId": "执行巡检任务",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}